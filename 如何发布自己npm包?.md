### 如何发布自己npm包？

> npm打包发布vite+vue+typescript业务组件库流程

### ![](https://cdn.jsdelivr.net/gh/Thawsoar/FigureBed@master/img/202106051725.jpg) 

> 新公司的第一个需求就涉及到了我的知识盲区🙃，这样太幸运了吧！

#### 业务描述
后台业务编辑业务模块，生成前台二级展示页面，设计pc、h5、wx

#### 初版技术实现

初版公司大佬实现了一个库，抛出一个render函数，使用时传入对应的数据，类似jsx, 使用vue render函数渲染， 但是需要传入指定的dome node或者库中已实现的组件，样式使用公共样式。

#### 遇到的问题
对于初版的建站模块需求能够满足。但是后续扩展模块困难，数据繁多难以处理。难以处理的点主要是需要维护dom类型和样式类数据。复杂的组件交互难以实现。第一次使用者有一定的学习使用成本。

#### 解决办法
与组内同事商量以后，决定放弃继续使用库，写一个建站业务模块组件库发布到npm私服去，要求点是使用者只需要传入必要的数据即可生成页面，开发需确定数据格式，有明确的文档，后续扩展模块需要维护扩展组件库。

#### 实现方式
其实和在项目中写组件是一样的，我的实现盲区是如何打包vue组件库使得能够被安装应用，以及npm包的构建发布流程。之前是没有相关经验的，经过查阅搜索npm，找到一些vue组件库，通过查看其源码了解构建的流程，最后尝试使用vite成功构建npm包。

